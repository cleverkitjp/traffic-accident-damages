<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>交通事故損害賠償オールインワン電卓</title>

  <meta name="description" content="交通事故の傷害・後遺障害・死亡事故の損害額を自賠責基準・裁判所基準で瞬時に概算する計算補助ツール（参考値）。弁護士・保険会社実務向けの軽量Webアプリ。">
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", system-ui, sans-serif;
      background: #f7f7f9;
      margin: 0;
      color: #222;
      line-height: 1.6;
      padding-bottom: 40px;
    }
    header {
      background: #1e293b;
      color: white;
      padding: 16px;
      text-align: center;
      font-size: 1.2rem;
      font-weight: 600;
    }
    .container {
      padding: 16px;
      max-width: 720px;
      margin: auto;
    }
    .card {
      background: white;
      border-radius: 12px;
      padding: 16px;
      margin-bottom: 18px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.08);
    }
    .card-title {
      font-size: 1.1rem;
      font-weight: 600;
      margin-bottom: 8px;
      color: #111;
    }
    label {
      display: block;
      margin-top: 10px;
      font-weight: 500;
    }
    input, select {
      width: 100%;
      padding: 10px;
      margin-top: 4px;
      border-radius: 8px;
      border: 1px solid #ccc;
      font-size: 1rem;
      background: #fff;
    }
    .hidden {
      display: none;
    }
    button {
      width: 100%;
      padding: 14px;
      margin-top: 20px;
      background: #2563eb;
      color: white;
      border: none;
      border-radius: 10px;
      font-size: 1.1rem;
      font-weight: 600;
    }
    h2 {
      margin-top: 0;
    }
    .result-value {
      font-weight: 700;
      font-size: 1.15rem;
      color: #111;
    }
    .muted {
      color: #555;
      font-size: 0.9rem;
    }
    .sub {
      font-size: 0.85rem;
      color: #444;
    }
    .chart-wrapper {
      display: flex;
      justify-content: center;
      margin-top: 12px;
    }
    .chart-legend {
      display: flex;
      flex-direction: column;
      gap: 6px;
      margin-top: 10px;
      font-size: 0.9rem;
    }
    .chart-legend-item {
      display: flex;
      align-items: center;
      gap: 8px;
    }
    .chart-legend-color {
      width: 12px;
      height: 12px;
      border-radius: 999px;
    }
  </style>
</head>

<body>
<header>交通事故損害賠償オールインワン電卓</header>

<div class="container">

  <!-- 注意書き -->
  <section class="card">
    <div class="muted">
      本ツールは弁護士・保険会社実務向けの<strong>概算計算補助ツール</strong>です。
      具体的な和解額の提案や法律判断を行うものではありません。
    </div>
  </section>

  <!-- 入力カード -->
  <section class="card" id="inputCard">
    <h2 class="card-title">入力</h2>

    <label>事故類型を選択</label>
    <select id="caseType">
      <option value="injury">傷害（入通院）</option>
      <option value="aftereffect">後遺障害</option>
      <option value="death">死亡事故</option>
    </select>

    <!-- 共通：基礎収入 -->
    <label>基礎収入（円 / 年）</label>
    <input type="number" id="annualIncome" placeholder="例：4,000,000">

    <!-- 傷害用 -->
    <div id="injuryInputs">
      <label>治療期間（日）</label>
      <input type="number" id="treatmentDays">

      <label>実通院日数（日）</label>
      <input type="number" id="visitDays">

      <label>休業日数（日）</label>
      <input type="number" id="absenceDays">
    </div>

    <!-- 後遺障害用 -->
    <div id="afterInputs" class="hidden">
      <label>後遺障害等級</label>
      <select id="afterGrade">
        <option value="none">該当なし</option>
        <option value="1">1級</option>
        <option value="2">2級</option>
        <option value="3">3級</option>
        <option value="4">4級</option>
        <option value="5">5級</option>
        <option value="6">6級</option>
        <option value="7">7級</option>
        <option value="8">8級</option>
        <option value="9">9級</option>
        <option value="10">10級</option>
        <option value="11">11級</option>
        <option value="12">12級</option>
        <option value="13">13級</option>
        <option value="14">14級</option>
      </select>

      <label>喪失期間（年）</label>
      <input type="number" id="lossYearsOverride" placeholder="未入力なら自動">

      <label>労働能力喪失率（%）</label>
      <input type="number" id="lossRateOverride" placeholder="未入力なら自動">
    </div>

    <!-- 死亡事故用 -->
    <div id="deathInputs" class="hidden">
      <label>生活費控除方式</label>
      <select id="deathSupportType">
        <option value="none">被扶養者なし</option>
        <option value="one">扶養1名</option>
        <option value="twoPlus">扶養2名以上</option>
      </select>

      <label>生活費控除率（%）任意指定</label>
      <input type="number" id="deathLifeRate" placeholder="未入力なら自動">

      <label>就労可能年数</label>
      <input type="number" id="deathWorkYears" placeholder="例：30">

      <label>死亡慰謝料（モデル）</label>
      <select id="deathPainPreset">
        <option value="self">本人のみ：2,500万円</option>
        <option value="dependent">一家の支柱：2,800万円</option>
        <option value="custom">カスタム</option>
      </select>

      <label>死亡慰謝料（カスタム指定・円）</label>
      <input type="number" id="deathPainCustom" placeholder="任意（上でカスタム選択時）">

      <label>葬儀費（円）</label>
      <input type="number" id="deathFuneral" placeholder="例：200,000">
    </div>

    <label>過失割合（%）※被害者側</label>
    <input type="number" id="faultPercent" value="0">

    <label>既払金（円）</label>
    <input type="number" id="alreadyPaid" value="0">

    <button id="calcButton">損害額を計算する</button>
  </section>

  <!-- 結果：サマリー -->
  <section id="resultSection" class="card hidden">
    <h2 class="card-title">結果（概算・参考値）</h2>

    <p class="sub">裁判所基準（概算）</p>
    <div class="result-value" id="courtNetAmount">¥0</div>

    <p class="sub" style="margin-top:12px;">自賠責基準（概算）</p>
    <div class="result-value" id="jibaiNetAmount">¥0</div>
  </section>

  <!-- 円グラフ -->
  <section id="chartSection" class="card hidden">
    <h2 class="card-title">裁判所基準の損害構造（概算）</h2>
    <p class="muted">裁判所基準の総損害額の構成比を円グラフで表示します。</p>

    <div class="chart-wrapper">
      <canvas id="courtChart" width="320" height="320"></canvas>
    </div>

    <div id="chartLegend" class="chart-legend"></div>
    <p id="chartNote" class="muted"></p>
  </section>

  <!-- 明細カード -->
  <section id="detailResults" class="card hidden">
    <h2 class="card-title">明細（裁判所基準）</h2>

    <p>傷害慰謝料：<span id="courtInjuryPain"></span></p>
    <p>後遺障害 / 死亡慰謝料：<span id="courtAfterPain"></span></p>
    <p>逸失利益：<span id="courtLostEarnings"></span></p>
    <p>休業損害：<span id="courtLostWages"></span></p>
    <p>その他費用：<span id="courtOtherCosts"></span></p>
    <hr>
    <p>総損害額：<span id="courtTotal"></span></p>
    <p>過失相殺後：<span id="courtAfterFault"></span></p>
    <p>既払控除後（受取額）：<span id="courtAfterPaid"></span></p>

    <h3 style="margin-top:18px;">構成比</h3>
    <p>傷害慰謝料：<span id="courtRatioInjury"></span></p>
    <p>後遺障害 / 死亡慰謝料：<span id="courtRatioAfter"></span></p>
    <p>逸失利益：<span id="courtRatioLostEarnings"></span></p>
    <p>その他：<span id="courtRatioOther"></span></p>

    <hr style="margin-top:18px;margin-bottom:18px;">

    <h2 class="card-title">明細（自賠責）</h2>
    <p>傷害慰謝料：<span id="jibaiInjuryPain"></span></p>
    <p>後遺障害慰謝料：<span id="jibaiAfterPain"></span></p>
    <p>休業損害：<span id="jibaiLostWages"></span></p>
    <p>その他費用：<span id="jibaiOtherCosts"></span></p>
    <hr>
    <p>総損害額：<span id="jibaiTotal"></span></p>
    <p id="jibaiCapInfo" class="muted"></p>
    <p>過失相殺後：<span id="jibaiAfterFault"></span></p>
    <p>既払控除後（受取額）：<span id="jibaiAfterPaid"></span></p>

  </section>

</div>

<script src="script.js"></script>

</body>
</html>
